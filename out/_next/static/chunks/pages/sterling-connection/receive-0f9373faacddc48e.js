(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[561],{5256:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sterling-connection/receive",function(){return t(1433)}])},1433:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return x}});var a=t(5893),i=t(620),r=t(3805),s=t(7845),l=t(1151),o=(t(7294),{default:"bg-orange-100 text-orange-800 dark:text-orange-300 dark:bg-orange-200 dark:bg-opacity-10",error:"bg-red-200 text-red-900 dark:text-red-200 dark:bg-red-600 dark:bg-opacity-30",warning:"bg-yellow-200 text-yellow-900 dark:text-yellow-200 dark:bg-yellow-700 dark:bg-opacity-30"});function d(e){var n=e.children,t=e.type,i=void 0===t?"default":t,r=e.emoji,s=void 0===r?"\ud83d\udca1":r;return(0,a.jsxs)("div",{className:"".concat(o[i]," flex rounded-lg callout mt-6"),children:[(0,a.jsx)("div",{className:"pl-3 pr-2 py-2 select-none text-xl",style:{fontFamily:'"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"'},children:s}),(0,a.jsx)("div",{className:"pr-4 py-2",children:n})]})}function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),a.forEach((function(n){c(e,n,t[n])}))}return e}function p(e){var n=void 0===e?{}:e,t=function(){var e=Object.assign({h1:"h1",p:"p",code:"code",h2:"h2",h4:"h4",ul:"ul",li:"li",a:"a",pre:"pre",em:"em"},(0,l.ah)(),n.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.h1,{children:"Provider -> Sterling"}),"\n",(0,a.jsxs)(e.p,{children:["A data provider can send messages to the ",(0,a.jsx)(e.code,{children:"sterling-connection"})," middleware,\neither in response to a message it received from the middleware or because, for\nexample, it has new data that it wants Sterling to display."]}),"\n",(0,a.jsx)(e.p,{children:"This page outlines all of the messages that the middleware understands as well\nas the effect the message has on the Sterling interface."}),"\n",(0,a.jsx)(e.h2,{children:(0,a.jsx)(e.code,{children:"data"})}),"\n",(0,a.jsx)(e.p,{children:"A message containing new data for Sterling to display and/or changes to make to\nany data that is already displayed. Note that once data is visible to the user,\nthe data itself cannot be changed. Updates can only be applied to a datum's\nmetadata, which describes a few choice UI components associated with each datum."}),"\n",(0,a.jsx)(e.h4,{children:"Payload Fields"}),"\n",(0,a.jsx)(e.p,{children:"All fields are optional."}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"enter"})," - An array of new data (as ",(0,a.jsx)(e.a,{href:"./types#Datum",children:(0,a.jsx)(e.code,{children:"Datum"})})," objects) to\ndisplay in Sterling."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"update"})," - An array of updates (as ",(0,a.jsx)(e.a,{href:"./types#DatumMeta",children:(0,a.jsx)(e.code,{children:"DatumMeta"})})," objects)\nto apply to existing data in Sterling."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"exit"})," - An array of data IDs to remove from display in Sterling."]}),"\n"]}),"\n",(0,a.jsx)(e.h4,{children:"Payload Types"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"{\n  enter?: Datum[];\n  update?: DatumMeta[];\n  exit?: string[];\n}\n"})}),"\n",(0,a.jsx)(e.h4,{children:"Examples"}),"\n",(0,a.jsx)(e.p,{children:'In this example, Alloy 5 has generated an instance to display in Sterling. When\nthe instance is displayed, a "Next" button should be visible that, when clicked\nby the user, sends an action back to Alloy with the string "next". Furthermore,\nAlloy is able to evaluate expressions for this instance, so the evaluator UI\nshould be available when viewing the instance.'}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\n  "type": "data",\n  "version": 1,\n  "payload": {\n    "enter": [\n      {\n        "id": "1",\n        "actions": [{ "id": "next", "text": "Next" }],\n        "evaluator": true,\n        "data": "<alloy>...</alloy>"\n      }\n    ]\n  }\n}\n'})}),"\n",(0,a.jsxs)(e.p,{children:['Now, let\'s say that the user clicked the "Next" button and Alloy generated the\nnext instance to display. The following message instructs Sterling to display\nthe new instance ',(0,a.jsx)(e.em,{children:"and"}),' to remove the ability to use the evaluator or click the\n"Next" button from the previous instance.']}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\n  "type": "data",\n  "version": 1,\n  "payload": {\n    "enter": [\n      {\n        "id": "2",\n        "actions": [{ "id": "next", "text": "Next" }],\n        "evaluator": true,\n        "data": "<alloy>...</alloy>"\n      }\n    ],\n    "update": [{ "id": "1", "actions": [], "evaluator": false }]\n  }\n}\n'})}),"\n",(0,a.jsx)(e.p,{children:"Finally, let's say the user has opened a new file in Alloy and generated a new\ninstance to display in Sterling. The following message will remove all previous\ninstances from Sterling and display only the new one."}),"\n",(0,a.jsx)(d,{type:"warning",emoji:"\u26a0\ufe0f",children:(0,a.jsx)(e.p,{children:"Developers of data providers should carefully consider when it is appropriate\nto remove data from Sterling, as doing so could potentially lead to a bad user\nexperience. Customizations the user has made within Sterling, such as graph\nlayouts, will not be preserved in any way."})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\n  "type": "data",\n  "version": 1,\n  "payload": {\n    "enter": [\n      {\n        "id": "3",\n        "actions": [{ "id": "next", "text": "Next" }],\n        "evaluator": true,\n        "data": "<alloy>...</alloy>"\n      }\n    ],\n    "exit": ["1", "2"]\n  }\n}\n'})}),"\n",(0,a.jsx)(e.h2,{children:(0,a.jsx)(e.code,{children:"eval"})}),"\n",(0,a.jsx)(e.p,{children:"A message that includes the result of evaluating an expression associated with a\nspecific datum."}),"\n",(0,a.jsx)(e.h4,{children:"Payload Fields"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"id"})," - The ID of the ",(0,a.jsx)(e.a,{href:"./send#eval",children:(0,a.jsx)(e.code,{children:"eval"})})," message originally sent from\nSterling to the provider."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"result"})," - The result of the evaluated expression."]}),"\n"]}),"\n",(0,a.jsx)(e.h4,{children:"Payload Types"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:"{\n  id: string;\n  result: string;\n}\n"})}),"\n",(0,a.jsx)(e.h4,{children:"Example"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\n  "type": "eval",\n  "version": 1,\n  "payload": {\n    "id": "0",\n    "result": "{}"\n  }\n}\n'})}),"\n",(0,a.jsx)(e.h2,{children:(0,a.jsx)(e.code,{children:"meta"})}),"\n",(0,a.jsx)(e.p,{children:"A message that includes information about a data provider, such as the\nprovider's name and the types of views it supports."}),"\n",(0,a.jsx)(e.h4,{children:"Payload Fields"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"name"})," - The name of the provider, which will be displayed in various places\naround the Sterling UI. Defaults to ",(0,a.jsx)(e.code,{children:'"unknown provider"'})," if not provided."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"evaluator"})," - A boolean indicating whether the data provider provides\n",(0,a.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop",children:"REPL"}),"\nfunctionality. If false, the evaluator will be removed from the Sterling UI\ncompletely. If true, the evaluator will be in Sterling UI and can be enabled\nor disabled on a per-datum basis (see ",(0,a.jsx)(e.a,{href:"#data",children:(0,a.jsx)(e.code,{children:"data"})})," for more). The default\nis false."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"views"})," - A list of data views the provider supports, in the order they will\nbe displayed in the Sterling UI. Defaults to ",(0,a.jsx)(e.code,{children:"[]"})," if not provided, and no\nviews will be displayed in the Sterling UI."]}),"\n"]}),"\n",(0,a.jsx)(e.h4,{children:"Payload Types"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-typescript",children:'{\n  name?: string;\n  evaluator?: boolean;\n  views?: ("graph" | "table" | "script")[];\n}\n'})}),"\n",(0,a.jsx)(e.h4,{children:"Example"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\n  "type": "meta",\n  "version": 1,\n  "payload": {\n    "name": "Alloy",\n    "evaluator": true,\n    "views": ["graph", "table", "script"]\n  }\n}\n'})}),"\n",(0,a.jsx)(e.h2,{children:(0,a.jsx)(e.code,{children:"message"})}),"\n",(0,a.jsx)(e.p,{children:"[TODO, low priority] This will allow providers to display a message in the\nSterling status bar."}),"\n",(0,a.jsx)(e.h2,{children:(0,a.jsx)(e.code,{children:"notify"})}),"\n",(0,a.jsxs)(e.p,{children:["[TODO, low priority] This will allow providers to display a\n",(0,a.jsx)(e.a,{href:"https://chakra-ui.com/docs/feedback/toast",children:"toast"})," in the Sterling UI."]}),"\n",(0,a.jsx)(e.h2,{children:(0,a.jsx)(e.code,{children:"pong"})}),"\n",(0,a.jsxs)(e.p,{children:["The ",(0,a.jsx)(e.code,{children:"pong"})," message is one of two messages that does not follow the standard\nmessage format. The other, ",(0,a.jsx)(e.a,{href:"./send#ping",children:(0,a.jsx)(e.code,{children:"ping"})}),", is used in concert with ",(0,a.jsx)(e.code,{children:"pong"}),"\nto keep the connection between the middleware and a data provider alive. As\nsuch, when a data provider receives a ",(0,a.jsx)(e.code,{children:"ping"})," message, it should immediately\nrespond with a ",(0,a.jsx)(e.code,{children:"pong"}),"."]}),"\n",(0,a.jsx)(e.h4,{children:"Example"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:'"pong"\n'})})]})},i=Object.assign({},(0,l.ah)(),n.components).wrapper;return i?(0,a.jsx)(i,h({},n,{children:(0,a.jsx)(t,{})})):t()}var u=(0,a.jsx)(p,{});function x(e){return(0,r.withSSG)((0,i.Z)({filename:"receive.mdx",route:"/sterling-connection/receive",meta:{},pageMap:[{name:"index",route:"/",frontMatter:{title:"Sterling Docs",headeronly:!0}},{name:"meta.json",meta:{index:"Introduction","sterling-connection":"Sterling Connection"}},{name:"sterling-connection",children:[{name:"formats",route:"/sterling-connection/formats"},{name:"introduction",route:"/sterling-connection/introduction"},{name:"meta.json",meta:{introduction:"Introduction",receive:"Provider -> Sterling",send:"Sterling -> Provider",types:"Types",formats:"Data Formats"}},{name:"receive",route:"/sterling-connection/receive"},{name:"send",route:"/sterling-connection/send"},{name:"types",route:"/sterling-connection/types"}],route:"/sterling-connection"}]},s.Z))(h({},e,{children:u}))}}},function(e){e.O(0,[284,830,774,888,179],(function(){return n=5256,e(e.s=n);var n}));var n=e.O();_N_E=n}]);